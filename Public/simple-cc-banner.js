document.addEventListener("DOMContentLoaded",()=>{const o=document.querySelector('[data-calbie-cc="banner"]'),e=document.querySelector('[data-calbie-cc="accept"]'),n=document.querySelector('[data-calbie-cc="decline"]'),c=document.querySelector('[data-calbie-cc="open-settings"]');if(!o)return void console.error('C.C. banner element not found. Please add data-calbie-cc="banner" attribute to your banner div.');if(!e||!n)return void console.error("C.C. buttons not found. Please check your data-calbie-cc attributes.");const t="calbie_cookie_consent_status";function l(){const o={googleAnalytics:!1,googleTagManager:!1,metaPixel:!1,googleMaps:!1,otherAnalytics:[],otherMarketing:[]},e=["google-analytics.com","googletagmanager.com","analytics.google.com","hotjar.com","mouseflow.com","clarity.ms","mixpanel.com","segment.com","amplitude.com","heap.io","fullstory.com","logrocket.com","quantcast.com","chartbeat.com","newrelic.com","pendo.io"],n=["facebook.net/fbevents","connect.facebook.net","doubleclick.net","ads.google.com","adservice.google.com","googleadservices.com","linkedin.com/px","snap.licdn.com","twitter.com/i/adsct","analytics.twitter.com","bat.bing.com","reddit.com/api/v2","pinterest.com/ct","tiktok.com/i18n/pixel","quora.com/qevents","taboola.com","outbrain.com","criteo.com","adroll.com","convertkit.com"];(window.gtag||window.ga||window.dataLayer&&!window.dataLayer._blocked)&&(o.googleAnalytics=!0),(window.google_tag_manager||document.querySelector('script[src*="googletagmanager.com/gtm.js"]'))&&(o.googleTagManager=!0),(window.fbq||window._fbq||document.querySelector('script[src*="facebook.net/fbevents"]'))&&(o.metaPixel=!0),(window.google?.maps||document.querySelector('script[src*="maps.googleapis.com"]'))&&(o.googleMaps=!0);return document.querySelectorAll("script[src]").forEach(c=>{const t=c.src.toLowerCase();e.forEach(e=>{if(t.includes(e)){const n=e.split(".")[0];o.otherAnalytics.includes(n)||o.otherAnalytics.push(n)}}),n.forEach(e=>{if(t.includes(e)){const n=e.split(".")[0];o.otherMarketing.includes(n)||o.otherMarketing.push(n)}})}),o}function a(){o.style.display="none",console.log("C.C. banner hidden")}function i(){o.style.display="block",console.log("C.C. banner shown")}function s(o){"accepted"===o?(window.dataLayer&&"function"==typeof window.dataLayer.push&&!window.dataLayer._blocked||(window.dataLayer=window.dataLayer||[],delete window.dataLayer._blocked,console.log("✓ Google Analytics/GTM unblocked.")),window.gtag&&window.gtag._blocked&&(delete window.gtag._blocked,console.log("✓ gtag function unblocked.")),window.fbq&&window.fbq._blocked&&(delete window.fbq._blocked,console.log("✓ Meta Pixel unblocked.")),window.initMap&&window.initMap._blocked&&(delete window.initMap._blocked,console.log("✓ Google Maps unblocked."))):(window.dataLayer={push:function(){console.log("GTM/GA dataLayer push blocked.")},_blocked:!0},window.gtag=function(){},window.gtag._blocked=!0,console.log("✗ Google Analytics/GTM blocked."),window.fbq=function(){},window.fbq._blocked=!0,window._fbq=window.fbq,console.log("✗ Meta Pixel blocked."),window.initMap=function(){console.log("Google Maps initialization blocked.")},window.initMap._blocked=!0,console.log("✗ Google Maps blocked."))}e.addEventListener("click",o=>{o.preventDefault(),localStorage.setItem(t,"accepted"),a();const e=l();console.log("\n=== C.C.: ACCEPTED ==="),console.log("Detected scripts:",e),console.log("Unblocking scripts..."),s("accepted"),console.log("All marketing and analytics scripts have been unblocked."),console.log("================================\n")}),n.addEventListener("click",o=>{o.preventDefault(),localStorage.setItem(t,"declined"),a();const e=l();console.log("\n=== C.C.: DECLINED ==="),console.log("Detected scripts:",e),console.log("Blocking scripts..."),s("declined"),console.log("All marketing and analytics scripts have been blocked."),console.log("================================\n")}),c&&c.addEventListener("click",o=>{o.preventDefault(),i()});const d=l();if(console.log("\n=== Calbie C.C. Banner Initialized ==="),console.log("Detected scripts on page:",d),r=d,!Object.values(r).some(o=>!0===o))return console.log("ℹ️  No marketing or analytics scripts detected on this page."),console.log("C.C. banner will not be shown."),console.log("================================================\n"),void a();var r;const g=localStorage.getItem(t);g?(a(),s(g),console.log(`Existing consent found: ${g}`),console.log("================================================\n")):(i(),console.log("No consent found, showing banner"),console.log("================================================\n"))});